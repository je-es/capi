'use strict';var n={baseURL:"",timeout:3e4,headers:{},interceptors:{request:null,response:null,error:null}};function f(r){n={...n,...r,headers:{...n.headers,...r.headers},interceptors:{...n.interceptors,...r.interceptors}};}function m(){return {...n}}function T(){n={baseURL:"",timeout:3e4,headers:{},interceptors:{request:null,response:null,error:null}};}async function p(r){let e={method:r.method||"GET",url:r.url,data:r.data,headers:{...n.headers,...r.headers},params:r.params,timeout:r.timeout??n.timeout};if(n.interceptors.request)try{e=await Promise.resolve(n.interceptors.request(e));}catch(t){throw c("Request interceptor failed",0,t)}let a=e.url.startsWith("http")?e.url:`${n.baseURL}${e.url}`;if(e.params&&Object.keys(e.params).length>0){let t=new URLSearchParams(Object.entries(e.params).reduce((s,[l,d])=>(d!=null&&(s[l]=String(d)),s),{})).toString();t&&(a+=(a.includes("?")?"&":"?")+t);}let o={method:e.method,headers:e.headers,signal:h(e.timeout||3e4)};if(e.data&&e.method!=="GET"&&e.method!=="HEAD"){let t=e.headers?.["Content-Type"]||e.headers?.["content-type"];t?.includes("application/json")?o.body=JSON.stringify(e.data):e.data instanceof FormData?(o.body=e.data,delete o.headers,o.headers={...e.headers},delete o.headers["Content-Type"]):e.data instanceof Blob||typeof e.data=="string"?o.body=e.data:(o.body=JSON.stringify(e.data),t||(o.headers["Content-Type"]="application/json"));}try{let t=await fetch(a,o),s,l=t.headers.get("Content-Type")||"";if(l.includes("application/json")){let i=await t.text();s=i?JSON.parse(i):null;}else if(l.includes("text/"))s=await t.text();else if(l.includes("application/octet-stream")||l.includes("application/pdf"))s=await t.blob();else {let i=await t.text();try{s=i&&JSON.parse(i);}catch{s=i;}}if(!t.ok){let i=c(t.statusText||"Request failed",t.status,s);if(n.interceptors.error)return n.interceptors.error(i);throw i}let d={data:s,status:t.status,statusText:t.statusText,headers:{}};return t.headers.forEach((i,u)=>{d.headers[u]=i;}),n.interceptors.response?await Promise.resolve(n.interceptors.response(d)):d}catch(t){let s;if(t.name==="AbortError"?s=c("Request timeout",0,null):t instanceof TypeError&&t.message.includes("fetch")?s=c("Network error",0,null):t.message&&t.status!==void 0?s=t:s=c(t.message||"Unknown error",t.status||0,t.data||null),n.interceptors.error)return n.interceptors.error(s);throw s}}var y={get:(r,e)=>p({...e,method:"GET",url:r}),post:(r,e,a)=>p({...a,method:"POST",url:r,data:e}),put:(r,e,a)=>p({...a,method:"PUT",url:r,data:e}),patch:(r,e,a)=>p({...a,method:"PATCH",url:r,data:e}),delete:(r,e)=>p({...e,method:"DELETE",url:r}),head:(r,e)=>p({...e,method:"HEAD",url:r}),options:(r,e)=>p({...e,method:"OPTIONS",url:r})};function h(r){let e=new AbortController;return setTimeout(()=>e.abort(),r),e.signal}function c(r,e,a){return {message:r,status:e,data:a}}exports.api=p;exports.configureApi=f;exports.getApiConfig=m;exports.http=y;exports.resetApiConfig=T;//# sourceMappingURL=main.cjs.map
//# sourceMappingURL=main.cjs.map