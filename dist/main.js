var i={baseURL:"",timeout:3e4,headers:{},interceptors:{request:null,response:null,error:null}};function m(r){i={...i,...r,headers:{...i.headers,...r.headers},interceptors:{...i.interceptors,...r.interceptors}};}function f(){return {...i}}function A(){i={baseURL:"",timeout:3e4,headers:{},interceptors:{request:null,response:null,error:null}};}async function p(r){let e={method:r.method||"GET",url:r.url,data:r.data,headers:{...i.headers,...r.headers},params:r.params,timeout:r.timeout??i.timeout};if(i.interceptors.request)try{e=await Promise.resolve(i.interceptors.request(e));}catch(t){throw u("Request interceptor failed",0,t)}let o=e.url.startsWith("http")?e.url:`${i.baseURL}${e.url}`;if(e.params&&Object.keys(e.params).length>0){let t=new URLSearchParams(Object.entries(e.params).reduce((s,[l,d])=>(d!=null&&(s[l]=String(d)),s),{})).toString();t&&(o+=(o.includes("?")?"&":"?")+t);}let a={method:e.method,headers:e.headers,signal:h(e.timeout||3e4)};if(e.data&&e.method!=="GET"&&e.method!=="HEAD"){let t=e.headers?.["Content-Type"]||e.headers?.["content-type"];t?.includes("application/json")?a.body=JSON.stringify(e.data):e.data instanceof FormData?(a.body=e.data,delete a.headers,a.headers={...e.headers},delete a.headers["Content-Type"]):e.data instanceof Blob||typeof e.data=="string"?a.body=e.data:(a.body=JSON.stringify(e.data),t||(a.headers["Content-Type"]="application/json"));}try{let t=await fetch(o,a),s,l=t.headers.get("Content-Type")||"";if(l.includes("application/json")){let n=await t.text();s=n?JSON.parse(n):null;}else if(l.includes("text/"))s=await t.text();else if(l.includes("application/octet-stream")||l.includes("application/pdf"))s=await t.blob();else {let n=await t.text();try{s=n&&JSON.parse(n);}catch{s=n;}}if(!t.ok){let n=u(t.statusText||"Request failed",t.status,s);if(i.interceptors.error)return i.interceptors.error(n);throw n}let d={data:s,status:t.status,statusText:t.statusText,headers:{}};return t.headers.forEach((n,c)=>{d.headers[c]=n;}),i.interceptors.response?await Promise.resolve(i.interceptors.response(d)):d}catch(t){let s;if(t.name==="AbortError"?s=u("Request timeout",0,null):t instanceof TypeError&&t.message.includes("fetch")?s=u("Network error",0,null):t.message&&t.status!==void 0?s=t:s=u(t.message||"Unknown error",t.status||0,t.data||null),i.interceptors.error)return i.interceptors.error(s);throw s}}function h(r){let e=new AbortController;return setTimeout(()=>e.abort(),r),e.signal}function u(r,e,o){return {message:r,status:e,data:o}}var y={get:(r,e)=>p({...e,method:"GET",url:r}),post:(r,e,o)=>p({...o,method:"POST",url:r,data:e}),put:(r,e,o)=>p({...o,method:"PUT",url:r,data:e}),patch:(r,e,o)=>p({...o,method:"PATCH",url:r,data:e}),delete:(r,e)=>p({...e,method:"DELETE",url:r}),head:(r,e)=>p({...e,method:"HEAD",url:r}),options:(r,e)=>p({...e,method:"OPTIONS",url:r})};export{p as api,m as configureApi,f as getApiConfig,y as http,A as resetApiConfig};//# sourceMappingURL=main.js.map
//# sourceMappingURL=main.js.map