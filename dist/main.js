var n={baseURL:"",timeout:3e4,headers:{},interceptors:{request:null,response:null,error:null}};function h(t){n={...n,...t,headers:{...n.headers,...t.headers},interceptors:{...n.interceptors,...t.interceptors}};}function m(){return {...n}}function A(){n={baseURL:"",timeout:3e4,headers:{},interceptors:{request:null,response:null,error:null}};}async function p(t){let e={method:t.method||"GET",url:t.url,data:t.data,headers:{...n.headers,...t.headers},params:t.params,timeout:t.timeout??n.timeout};if(n.interceptors.request)try{e=await Promise.resolve(n.interceptors.request(e));}catch(r){throw c("Request interceptor failed",0,r)}let i=e.url.startsWith("http")?e.url:`${n.baseURL}${e.url}`;if(e.params&&Object.keys(e.params).length>0){let r=new URLSearchParams(Object.entries(e.params).reduce((s,[l,u])=>(u!=null&&(s[l]=String(u)),s),{})).toString();r&&(i+=(i.includes("?")?"&":"?")+r);}let a={method:e.method,headers:e.headers,signal:T(e.timeout||3e4)};if(e.data&&e.method!=="GET"&&e.method!=="HEAD"){let r=e.headers?.["Content-Type"]||e.headers?.["content-type"];r?.includes("application/json")?a.body=JSON.stringify(e.data):e.data instanceof FormData?(a.body=e.data,delete a.headers,a.headers={...e.headers},delete a.headers["Content-Type"]):e.data instanceof Blob||typeof e.data=="string"?a.body=e.data:(a.body=JSON.stringify(e.data),r||(a.headers["Content-Type"]="application/json"));}try{let r=await fetch(i,a),s,l=r.headers.get("Content-Type")||"";if(l.includes("application/json")){let o=await r.text();s=o?JSON.parse(o):null;}else if(l.includes("text/"))s=await r.text();else if(l.includes("application/octet-stream")||l.includes("application/pdf"))s=await r.blob();else {let o=await r.text();try{s=o&&JSON.parse(o);}catch{s=o;}}if(!r.ok){let o=c(r.statusText||"Request failed",r.status,s);if(n.interceptors.error)return n.interceptors.error(o);throw o}let u={data:s,status:r.status,statusText:r.statusText,headers:{}};return r.headers.forEach((o,d)=>{u.headers[d]=o;}),n.interceptors.response?await Promise.resolve(n.interceptors.response(u)):u}catch(r){let s;if(r instanceof Error?r.name==="AbortError"?s=c("Request timeout",0,null):r instanceof TypeError&&r.message.includes("fetch")?s=c("Network error",0,null):s=c(r.message||"Unknown error",0,null):f(r)?s=r:s=c("Unknown error",0,null),n.interceptors.error)return n.interceptors.error(s);throw s}}var g={get:(t,e)=>p({...e,method:"GET",url:t}),post:(t,e,i)=>p({...i,method:"POST",url:t,data:e}),put:(t,e,i)=>p({...i,method:"PUT",url:t,data:e}),patch:(t,e,i)=>p({...i,method:"PATCH",url:t,data:e}),delete:(t,e)=>p({...e,method:"DELETE",url:t}),head:(t,e)=>p({...e,method:"HEAD",url:t}),options:(t,e)=>p({...e,method:"OPTIONS",url:t})};function T(t){let e=new AbortController;return setTimeout(()=>e.abort(),t),e.signal}function c(t,e,i){return {message:t,status:e,data:i}}function f(t){return typeof t=="object"&&t!==null&&"message"in t&&"status"in t}export{p as api,h as configureApi,m as getApiConfig,g as http,A as resetApiConfig};//# sourceMappingURL=main.js.map
//# sourceMappingURL=main.js.map